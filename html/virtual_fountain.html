<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Title</title>
		<style>
			*
			{
				margin: 0;
				padding: 0;
			}
			#myCanvas
			{
				display: block;
				background: #0056ff;
			}
		</style>
		<script src="../js/jquery-3.1.0.min.js"></script>
		<script src="../js/shape&draw.js"></script>
		<script>
			$(window).ready(function()
			{
				var canvas = $("#myCanvas");
				var cxt = canvas[0].getContext("2d");
				var rightArrow = $("#rightArrow")[0];

				$(window).resize(resizeCanvas);//自动铺满屏幕
				function resizeCanvas()
				{
					canvas.attr('width', $(window)[0].innerWidth);
					canvas.attr('height', $(window)[0].innerHeight);
					canvasWidth = canvas.width();
					canvasHeight = canvas.height();
				}
				resizeCanvas();

				//canvas.setAttribute("background", "yellow");

				var balls = [];
				var numBalls = 300, gravity = 0.5;//一次喷出80个水滴（球），其重力为0.5
				for(var ball, i = 0; i < numBalls; i++)//给每个球赋予同样的坐标，随机的颜色
				{
					ball = new Circle(0, 0, 2);
					ball.x = canvas[0].width / 2;
					ball.y = canvas[0].height;
					//ball.color = "#" + (Math.random() * 0xffffff).toString(16).replace(".","").slice(0, 6);//随机生成16进制的6位数字模拟随机颜色
					ball.color = '#fff';
					ball.vx = Math.random() * 4 - 2;
					ball.vy = Math.random() * -10 - 20;
					balls.push(ball);
				}
				function drawBall(ball)
				{
					//开始运动
					ball.vy += gravity;
					ball.x += ball.vx;
					ball.y += ball.vy;
					ball.context = cxt;

					//判定是否超出边界，如果超出即重置其位置
					if(ball.x - ball.radius > canvas[0].width || ball.x + ball.radius < 0 || ball.y - ball.radius > canvas[0].height || ball.y + ball.radius < 0)
					{
						ball.x = canvas[0].width / 2;
						ball.y = canvas[0].height;
						ball.vx = Math.random() * 4 - 2;
						ball.vy = Math.random() * -10 - 20;
					}
					ball.Draw(1);
				}

				function drawFrame()
				{
					window.requestAnimationFrame(drawFrame, canvas[0]);
					cxt.clearRect(0, 0, canvas[0].width, canvas[0].height);

					balls.forEach(drawBall);
					$("span")[0].innerHTML = "";
				}
				drawFrame();
			});
		</script>
	</head>
	<body>
		<canvas id="myCanvas" width="800" height="600"></canvas>
	</body>
</html>